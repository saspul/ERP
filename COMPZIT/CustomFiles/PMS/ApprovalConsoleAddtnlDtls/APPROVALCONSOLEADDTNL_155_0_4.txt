--19/06/2020 | 04:30 PM || EVM-0020 || CREATE TABLE

CREATE TABLE PMS_APPROVAL_CONSOLE_COMMNTDTL 
(
  APRVLCNSLCMNT_ID NUMBER(20) NOT NULL 
, APRVLCNSL_ID NUMBER(20) NOT NULL 
, APRVLCNSLCMNT_VISBLSTS NUMBER(1) DEFAULT 0 NOT NULL 
, APRVLCNSLCMNT_COMMENT VARCHAR2(300) NOT NULL 
, APRVLCNSLCMNT_INS_USR_ID NUMBER(10) NOT NULL 
, APRVLCNSLCMNT_INS_DATE TIMESTAMP NOT NULL 
, CONSTRAINT PMS_APPROVAL_CONSOLE_COMMN_PK PRIMARY KEY 
  (
    APRVLCNSLCMNT_ID 
  )
  ENABLE 
);

ALTER TABLE PMS_APPROVAL_CONSOLE_COMMNTDTL
ADD CONSTRAINT FK_APRVLCNSLCMNT_APRVLCNSLID FOREIGN KEY
(
  APRVLCNSL_ID 
)
REFERENCES PMS_APPROVAL_CONSOLE
(
  APRVLCNSL_ID 
)
ENABLE;

ALTER TABLE PMS_APPROVAL_CONSOLE_COMMNTDTL
ADD CONSTRAINT FK_APRVLCNSLCMNT_INS_USR_ID FOREIGN KEY
(
  APRVLCNSLCMNT_INS_USR_ID 
)
REFERENCES GN_USERS
(
  USR_ID 
)
ENABLE;

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_COMMNTDTL.APRVLCNSLCMNT_ID IS 'Auto Increment field. Use Sequence.';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_COMMNTDTL.APRVLCNSL_ID IS 'This field stores the main table id. Foreign key to PMS_APPROVAL_CONSOLE';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_COMMNTDTL.APRVLCNSLCMNT_VISBLSTS IS 'This field stores the visibility mode of the comment. 
Possible values are:-
0 - Public
1 - Private
';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_COMMNTDTL.APRVLCNSLCMNT_COMMENT IS 'This field stores the comment';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_COMMNTDTL.APRVLCNSLCMNT_INS_USR_ID IS 'This field stores the employee who added the comment. Foreign Key Relation To GN_USERS';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_COMMNTDTL.APRVLCNSLCMNT_INS_DATE IS 'This field will store insert date.';
COMMIT;

--19/06/2020 | 04:30 PM || EVM-0020 || CREATE TABLE

CREATE TABLE PMS_APPROVAL_CONSOLE_NOTEDTLS 
(
  APRVLCNSLNOTE_ID VARCHAR2(20) NOT NULL 
, APRVLCNSL_ID NUMBER(20) NOT NULL 
, USR_ID NUMBER(10) NOT NULL 
, APRVLCNSLNOTE_MSG VARCHAR2(300) NOT NULL 
, APRVLCNSLNOTE_REPLYSTS NUMBER(1) DEFAULT 0 NOT NULL 
, APRVLCNSLNOTE_INS_USR_ID NUMBER(10) NOT NULL 
, APRVLCNSLNOTE_INS_DATE TIMESTAMP NOT NULL 
, APRVLCNSLNOTE_REPLY_MSG VARCHAR2(300) 
, APRVLCNSLNOTE_REPLY_DATE TIMESTAMP 
, CONSTRAINT PMS_APPROVAL_CONSOLE_NOTED_PK PRIMARY KEY 
  (
    APRVLCNSLNOTE_ID 
  )
  ENABLE 
);

ALTER TABLE PMS_APPROVAL_CONSOLE_NOTEDTLS
ADD CONSTRAINT FK_APRVLCNSLNOTE_APRVLCNSL_ID FOREIGN KEY
(
  APRVLCNSL_ID 
)
REFERENCES PMS_APPROVAL_CONSOLE
(
  APRVLCNSL_ID 
)
ENABLE;

ALTER TABLE PMS_APPROVAL_CONSOLE_NOTEDTLS
ADD CONSTRAINT FK_APRVLCNSLNOTE_INS_USR_ID FOREIGN KEY
(
  APRVLCNSLNOTE_INS_USR_ID 
)
REFERENCES GN_USERS
(
  USR_ID 
)
ENABLE;

ALTER TABLE PMS_APPROVAL_CONSOLE_NOTEDTLS
ADD CONSTRAINT FK_APRVLCNSLNOTE_USR_ID FOREIGN KEY
(
  USR_ID 
)
REFERENCES GN_USERS
(
  USR_ID 
)
ENABLE;

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEDTLS.APRVLCNSLNOTE_ID IS 'Auto Increment field. Use section.';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEDTLS.APRVLCNSL_ID IS 'This field stores the main table id. Foreign key to PMS_APPROVAL_CONSOLE';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEDTLS.USR_ID IS 'This field stores the employee ID to whom the note was added. Foreign key to GN_USERS';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEDTLS.APRVLCNSLNOTE_MSG IS 'This field stores the message note added to a user';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEDTLS.APRVLCNSLNOTE_REPLYSTS IS 'This field stores the reply status.
Possible values are:-
0 - Not replied
1 - Replied
';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEDTLS.APRVLCNSLNOTE_INS_USR_ID IS 'This field stores the employee who added the note. Foreign Key Relation To GN_USERS';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEDTLS.APRVLCNSLNOTE_INS_DATE IS 'This field will store insert date.';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEDTLS.APRVLCNSLNOTE_REPLY_MSG IS 'This field stores the reply message when user has replied to the note';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEDTLS.APRVLCNSLNOTE_REPLY_DATE IS 'This field stores the reply date';
COMMIT;

CREATE TABLE PMS_APPROVAL_CONSOLE_NOTEATTCH 
(
  APRVLCNSL_NTATCHID NUMBER(20) NOT NULL 
, APRVLCNSL_NOTEID NUMBER(20) NOT NULL 
, APRVLCNSLATCHNT_FILENM VARCHAR2(200) NOT NULL 
, APRVLCNSLATCHNT_FILEACTNM VARCHAR2(200) NOT NULL 
, APRVLCNSLATCHNT_TYPE NUMBER(1) DEFAULT 0 NOT NULL 
, CONSTRAINT PMS_APPROVAL_CONSOLE_NOTEA_PK PRIMARY KEY 
  (
    APRVLCNSL_NTATCHID 
  )
  ENABLE 
);

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEATTCH.APRVLCNSL_NTATCHID IS 'Auto Increment field. Use Sequence.';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEATTCH.APRVLCNSL_NOTEID IS 'This field stores the main table id. Foreign key to PMS_APPROVAL_CONSOLE_NOTEDTLS';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEATTCH.APRVLCNSLATCHNT_FILENM IS 'This field stores the created file name for the file uploaded';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEATTCH.APRVLCNSLATCHNT_FILEACTNM IS 'This field stores the actual file name for the file uploaded';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_NOTEATTCH.APRVLCNSLATCHNT_TYPE IS 'This field stores whether the attachment is added when note created or reply to note given. Possible values are:-
0-Note creation
1-Reply note creation
';
COMMIT;
CREATE TABLE PMS_APPROVAL_CONSOLE_ADDTNLDTL 
(
  APRVLCNSLADTNL_ID NUMBER(20) NOT NULL 
, APRVLCNSL_ID NUMBER(20) NOT NULL 
, USR_ID NUMBER(10) NOT NULL 
, APRVLCNSLADTNL_MSG VARCHAR2(300) NOT NULL 
, APRVLCNSLADTNL_REPLYSTS NUMBER(1) DEFAULT 0 NOT NULL 
, APRVLCNSLADTNL_INS_USR_ID NUMBER(10) NOT NULL 
, APRVLCNSLADTNL_INS_DATE TIMESTAMP NOT NULL 
, APRVLCNSLADTNL_REPLY_MSG VARCHAR2(300) 
, APRVLCNSLADTNL_REPLY_DATE TIMESTAMP 
, CONSTRAINT PMS_APPROVAL_CONSOLE_ADDTN_PK PRIMARY KEY 
  (
    APRVLCNSLADTNL_ID 
  )
  ENABLE 
);

ALTER TABLE PMS_APPROVAL_CONSOLE_ADDTNLDTL
ADD CONSTRAINT FK_APRVLCNSLADTNL_APRVLCNSLID FOREIGN KEY
(
  APRVLCNSL_ID 
)
REFERENCES PMS_APPROVAL_CONSOLE
(
  APRVLCNSL_ID 
)
ENABLE;

ALTER TABLE PMS_APPROVAL_CONSOLE_ADDTNLDTL
ADD CONSTRAINT FK_APRVLCNSLADTNL_INS_USR_ID FOREIGN KEY
(
  APRVLCNSLADTNL_INS_USR_ID 
)
REFERENCES GN_USERS
(
  USR_ID 
)
ENABLE;

ALTER TABLE PMS_APPROVAL_CONSOLE_ADDTNLDTL
ADD CONSTRAINT FK_APRVLCNSLADTNL_USR_ID FOREIGN KEY
(
  USR_ID 
)
REFERENCES GN_USERS
(
  USR_ID 
)
ENABLE;

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNLDTL.APRVLCNSLADTNL_ID IS 'Auto Increment field. Use section.';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNLDTL.APRVLCNSL_ID IS 'This field stores the main table id. Foreign key to PMS_APPROVAL_CONSOLE';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNLDTL.USR_ID IS 'This field stores the employee ID for whom the additional details note was added. Foreign key to GN_USERS';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNLDTL.APRVLCNSLADTNL_MSG IS 'This field stores the message';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNLDTL.APRVLCNSLADTNL_REPLYSTS IS 'This field stores the reply status.
Possible values are:-
0 - Not replied
1 - Replied
';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNLDTL.APRVLCNSLADTNL_INS_USR_ID IS 'This field stores the employee who added the additional details note. Foreign Key Relation To GN_USERS';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNLDTL.APRVLCNSLADTNL_INS_DATE IS 'This field will store insert date.';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNLDTL.APRVLCNSLADTNL_REPLY_MSG IS 'This field stores the reply message';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNLDTL.APRVLCNSLADTNL_REPLY_DATE IS 'This field stores the date of reply';
COMMIT;

CREATE TABLE PMS_APPROVAL_CONSOLE_ADDTNATCH 
(
  APRVLCNSL_ADTNLATCHID NUMBER(20) NOT NULL 
, APRVLCNSLADTNL_ID NUMBER(20) NOT NULL 
, APRVLCNSLATCHADDTN_FILENM VARCHAR2(200) NOT NULL 
, APRVLCNSLATCHADDTN_FILEACTNM VARCHAR2(200) NOT NULL 
, APRVLCNSLATCHADDTN_REPLYSTS NUMBER(1) DEFAULT 0 NOT NULL 
, CONSTRAINT PMS_APPROVAL_CNSL_ADDATCH_PK PRIMARY KEY 
  (
    APRVLCNSL_ADTNLATCHID 
  )
  USING INDEX 
  (
      CREATE UNIQUE INDEX PMS_APPROVAL_CONSOLE_ADDTN_PK1 ON PMS_APPROVAL_CONSOLE_ADDTNATCH (APRVLCNSL_ADTNLATCHID ASC) 
  )
  ENABLE 
);

ALTER TABLE PMS_APPROVAL_CONSOLE_ADDTNATCH
ADD CONSTRAINT FK_APRVLCNSLATCHADDTN_ADTNLID FOREIGN KEY
(
  APRVLCNSLADTNL_ID 
)
REFERENCES PMS_APPROVAL_CONSOLE_ADDTNLDTL
(
  APRVLCNSLADTNL_ID 
)
ENABLE;

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNATCH.APRVLCNSL_ADTNLATCHID IS 'Auto Increment field. Use Sequence.';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNATCH.APRVLCNSLADTNL_ID IS 'This field stores the main table id. Foreign key to PMS_APPROVAL_CONSOLE_ADDTNALDTLS';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNATCH.APRVLCNSLATCHADDTN_FILENM IS 'This field stores the created file name for the file uploaded';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNATCH.APRVLCNSLATCHADDTN_FILEACTNM IS 'This field stores the actual file name for the file uploaded';

COMMENT ON COLUMN PMS_APPROVAL_CONSOLE_ADDTNATCH.APRVLCNSLATCHADDTN_REPLYSTS IS 'This field stores whether attachment is for reply or not.
Possible values are:-
0- Not replied
2. Replied';
COMMIT;

--22/06/2020 | 10:30 AM || EVM-0020 || CREATE SEQUENCE

CREATE SEQUENCE SEQ_PMS_APRVLCNSLCMNT_ID INCREMENT BY 1 START WITH 1 MAXVALUE 999999999999999999999 MINVALUE 1;
CREATE SEQUENCE SEQ_PMS_APRVLCNSL_NOTEID INCREMENT BY 1 START WITH 1 MAXVALUE 99999999999999999999999 MINVALUE 1;
CREATE SEQUENCE SEQ_PMS_APRVLCNSLATCHNT_ID INCREMENT BY 1 START WITH 1 MAXVALUE 9999999999999999999999 MINVALUE 1;
COMMIT;

--23/06/2020 | 01:00 PM || EVM-0020 || INSERT DATA

INSERT INTO "APP_MOD_SECTIONS" (APPMSCT_ID, APPMSCT_NAME, APPMSCT_STATUS, APPMSCT_START_ID) VALUES ('248', 'APPROVAL_CONSOLE_NOTE_ATTACH', '1', '1');
Commit;

INSERT INTO "APP_PK_NEXTID" (APPMSCT_ID, CORPRT_ID, NEXT_NUMBER) VALUES ('248', '<CORPRT_ID>', '1');
Commit;

--23/06/2020 | 01:00 PM || EVM-0020 || ALTER TABLE

ALTER TABLE PMS_APPROVAL_CONSOLE_NOTEDTLS  
MODIFY (APRVLCNSLNOTE_ID NUMBER(20) );
COMMIT;
ALTER TABLE PMS_APPROVAL_CONSOLE_NOTEATTCH
ADD CONSTRAINT FK_APRVLCNSLATCHNT_APRVLCNSLID FOREIGN KEY
(
  APRVLCNSL_NOTEID 
)
REFERENCES PMS_APPROVAL_CONSOLE_NOTEDTLS
(
  APRVLCNSLNOTE_ID 
)
ENABLE;
COMMIT;

--24/06/2020 | 06:00 PM || EVM-0020 || CREATE SEQUENCE

CREATE SEQUENCE SEQ_PMS_APRVLCNSL_ADTNLID INCREMENT BY 1 START WITH 1 MAXVALUE 999999999999999999999999 MINVALUE 1;
CREATE SEQUENCE SEQ_PMS_APRVLCNSL_ADTNLATCHID INCREMENT BY 1 START WITH 1 MAXVALUE 9999999999999999999999 MINVALUE 1;
COMMIT;


--24/06/2020 | 07:00 PM || EVM-0020 || INSERT DATA

INSERT INTO "APP_MOD_SECTIONS" (APPMSCT_ID, APPMSCT_NAME, APPMSCT_STATUS, APPMSCT_START_ID) VALUES ('250', 'APPROVAL_CONSOLE_ADDTNL_ATTACH', '1', '1');
Commit;
INSERT INTO "APP_PK_NEXTID" (APPMSCT_ID, CORPRT_ID, NEXT_NUMBER) VALUES ('250', '<CORPRT_ID>', '1');
Commit;




